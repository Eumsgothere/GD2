using UnityEngine;

public class SphereRed : MonoBehaviour
{
    [SerializeField] private Renderer sphereRenderer;
    [SerializeField] private Color redColor = Color.red;
    [SerializeField] private Color blueColor = Color.blue;

    private Color currentColor;
    private int correctHits = 0;

    private void Start()
    {
        if (sphereRenderer == null)
            sphereRenderer = GetComponent<Renderer>();

        currentColor = (Random.value > 0.5f) ? blueColor : redColor;
        sphereRenderer.material.color = currentColor;
    }

    public void RegisterHit(string ballTag)
    {
        // Only respond to RedBall tag
        if (ballTag == "RedBall")
        {
            correctHits++;

            if (correctHits >= 1)
            {
                Destroy(gameObject); 
            }
        }
        if (ballTag == "BlueBall")
        {
            correctHits++;

            if (correctHits >= 1)
            {
                Destroy(gameObject);
            }
        }
    }

    private void OnCollisionEnter(Collision collision)
    {
        if (collision.gameObject.CompareTag("RedBall") || collision.gameObject.CompareTag("BlueBall"))
        {
            RegisterHit(collision.gameObject.tag);
        }
        if (collision.gameObject.CompareTag("BlueBall") || collision.gameObject.CompareTag("RedBall"))
        {
            RegisterHit(collision.gameObject.tag);
        }
    }
}
