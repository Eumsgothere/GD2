using UnityEngine;

public class SphereRed : MonoBehaviour
{
    [SerializeField] private Renderer sphereRenderer;
    [SerializeField] private Color redColor = Color.red;
    [SerializeField] private Color blueColor = Color.blue;

    private Color currentColor;
    private int correctHits = 0;

    private void Start()
    {
        if (sphereRenderer == null)
            sphereRenderer = GetComponent<Renderer>();

        currentColor = (Random.value > 0.5f) ? blueColor : redColor;
        sphereRenderer.material.color = currentColor;
    }

    public void RegisterHit(string ballTag)
    {
        // Only respond to RedBall tag
        if (ballTag == "RedBall")
        {
            correctHits++;
            Debug.Log("Correct hit! Count = " + correctHits);
            if (correctHits >= 1)
            {
                Destroy(gameObject);
             

            }
        }
        if (ballTag == "BlueBall")
        {
            correctHits++;
            Debug.Log("Correct hit! Count = " + correctHits);
            if (correctHits >= 1)
            {
                Destroy(gameObject);
                
            }
           
        }
        if (correctHits >= 5)
        {
            Debug.Log("Correct hit! Count = " + correctHits);
            //RotatingDoor.OpenDoor();
        }
    }

    private void OnCollisionEnter(Collision collision)
    {

        if (!collision.gameObject.CompareTag("RedBall") && !collision.gameObject.CompareTag("BlueBall"))
            return;

        bool isRedTarget = currentColor == redColor;
        string ballTag = collision.gameObject.tag;

        if ((isRedTarget && ballTag == "RedBall") || (!isRedTarget && ballTag == "BlueBall"))
        {
            Destroy(gameObject);
        }
        else
        {
            Debug.Log("Wrong color hit!");
        }
        
    }
    
}
